webpackJsonp([8],{HXef:function(e,n,t){"use strict";function a(e){t("x3yg")}Object.defineProperty(n,"__esModule",{value:!0});var i=t("Q6pl"),o=t("cHu4"),r=t("oAV5"),s=t("gyMJ"),l=t("6xed"),c={data:function(){return{adsValue:["330000","330200"],addressData:[],showAddress:!1,barsList:[],userAllow:!0,userPosition:{lat:"",lng:""},loading:!0}},beforeRouteEnter:function(e,n,t){document.title="牛霸霸屏",t()},created:function(){var e=this;this.$wechat.ready(function(){e.$wechat.getLocation({type:"wgs84",success:function(n){e.getAllRegions(n.latitude,n.longitude)},fail:function(){e.getAllRegions(29.88525897,121.57900597)}})})},mounted:function(){},methods:{getAllRegions:function(e,n){var t=this;Object(s.W)().then(function(a){for(var i=0;i<a.result.length&&"100000"===a.result[i].parent;i++)delete a.result[i].parent;t.addressData=a.result,t.getPosition(e,n)})},closeAddress:function(e){var n=this;if(!e)return!1;var t=this.addressData.find(function(e,t){return~~e.value==~~n.adsValue[1]});this.loading=!0,t?Object(s.A)({region_code:t.value}).then(function(e){Array.isArray(e.result)&&(n.userAllow?e.result.map(function(e,t){e.distance=Object(r.h)(e.locationLat,e.locationLng,n.userPosition.lat,n.userPosition.lng)}):e.result.map(function(e,n){e.distance="未知"}),e.result.sort(function(e,n){return e.distance-n.distance}),n.barsList=e.result)}).finally(function(){n.loading=!1}):this.loading=!1},getPosition:function(e,n){var t=this;this.$jsonp("http://api.map.baidu.com/geocoder/v2/",{location:e+","+n,coordtype:"wgs84ll",ret_coordtype:"bd09ll",output:"json",ak:"gqwAbhpew0rdL9sZei9dL2PQWGqW7beB"}).then(function(e){var n=e.result.addressComponent,a=Object(r.g)(n.province,n.city,t.addressData);t.adsValue=[a.province_id,a.city_id],t.userPosition.lng=e.result.location.lng,t.userPosition.lat=e.result.location.lat,t.closeAddress(!0)})},wxCoordsToBaidu:function(e){var n=this,t="";e.forEach(function(e,n){t+=e.locationLat+","+e.locationLng+";"}),t=t.substring(0,t.length-1),this.$jsonp("http://api.map.baidu.com/geoconv/v1/",{coords:t,from:1,to:5,ak:"gqwAbhpew0rdL9sZei9dL2PQWGqW7beB"}).then(function(t){if(console.log(t),t.result){var a=[];t.result.forEach(function(e,n){a.push(Object(r.h)(e.y,e.x,30.575429778924,114.31992734521))}),e.map(function(e,n){e.distance=a[n]}),n.barsList=e}}).catch(function(e){console.log(e)})}},computed:{cityName:function(){var e=this,n=this.addressData.find(function(n,t){return n.value===e.adsValue[1]});return n?n.name:""}},components:{BarsList:i.a,XAddress:o.a,InlineLoading:l.a}},d=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"container flex flex-v",staticStyle:{"background-color":"#121420",height:"100%"}},[t("div",{staticClass:"home-header"},[t("svg-icon",{attrs:{"icon-class":"hot",className:"hot-icon"}}),t("span",{staticClass:"h-title f16"},[e._v("热门推荐")]),t("span",{staticClass:"city-now",on:{click:function(n){e.showAddress=!0}}},[e._v(e._s(e.cityName)),t("svg-icon",{attrs:{"icon-class":"arrow-down",className:"arrow-down-icon"}})],1)],1),e._v(" "),t("div",{staticClass:"flex-1 scroll"},[e.loading?t("inline-loading",{attrs:{color:"#f31374",bgColor:"rgba(255, 255, 255, 0.2)"}}):e._e(),e._v(" "),t("BarsList",{attrs:{barsList:e.barsList,enter:"home"}})],1),e._v(" "),t("x-address",{staticStyle:{display:"none"},attrs:{"hide-district":"","popup-title":"选择城市",title:"",list:e.addressData,placeholder:"请选择地址",show:e.showAddress},on:{"on-hide":e.closeAddress,"update:show":function(n){e.showAddress=n}},model:{value:e.adsValue,callback:function(n){e.adsValue=n},expression:"adsValue"}})],1)},u=[],A={render:d,staticRenderFns:u},h=A,b=t("VU/8"),f=a,p=b(c,h,!1,f,"data-v-e5d18e3e",null);n.default=p.exports},HpKq:function(e,n,t){var a=t("YZ7j");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("abbfcf38",a,!0)},Q6pl:function(e,n,t){"use strict";function a(e){t("HpKq")}var i={props:["barsList","enter"],components:{},data:function(){return{}},mounted:function(){},computed:{list:function(){return this.barsList?this.barsList:[]}},methods:{pageToBarInfo:function(e,n){"home"===this.enter?this.$router.push({path:"/Main/"+e}):this.$router.push({path:"/AgentBarInfo",query:{id:e,type:3}})}},filters:{distance:function(e){return"string"==typeof e?e:Number(e/1e3).toFixed(2)+"km"}}},o=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"bar-list",class:{home:"home"==e.enter}},[t("ul",e._l(e.list,function(n,a){return t("li",{key:a,staticClass:"bar-item flex",on:{click:function(t){e.pageToBarInfo(n.id,n.name)}}},[t("div",{staticClass:"bar-img"},[t("img",{staticClass:"circle",attrs:{src:e._f("prefixImageUrl")(n.logo),alt:""}})]),e._v(" "),t("div",{staticClass:"bar-info flex flex-1 flex-v flex-pack-center"},[t("h2",{staticClass:"bar-name"},[e._v(e._s(n.name))]),e._v(" "),t("div",{staticClass:"bar-address"},[e._v(e._s(n.area_name)+e._s(n.address))])]),e._v(" "),"home"==e.enter?t("div",{staticClass:"bar-distance flex flex flex-align-center"},[t("svg-icon",{attrs:{"icon-class":"position"}}),t("span",[e._v(e._s(e._f("distance")(n.distance)))])],1):e._e(),e._v(" "),"home"!=e.enter?t("div",{staticClass:"tc bar-money pr flex flex-v flex-pack-center"},[t("p",{staticClass:"f16",staticStyle:{color:"red"}},[e._v(e._s(n.agent_balance))]),e._v(" "),t("p",{staticClass:"f13",staticStyle:{color:"#818181"}},[e._v("可提现收益")])]):e._e()])}))])},r=[],s={render:o,staticRenderFns:r},l=s,c=t("VU/8"),d=a,u=c(i,l,!1,d,"data-v-6c99bb84",null);n.a=u.exports},YZ7j:function(e,n,t){n=e.exports=t("FZ+f")(!0),n.push([e.i,'\n.bar-item[data-v-6c99bb84] {\n  padding: 0.36rem 0.3rem;\n}\n.home .bar-item[data-v-6c99bb84] {\n  margin-bottom: 1px;\n  background-color: #181b2a;\n}\n.bar-img[data-v-6c99bb84] {\n  width: 1rem;\n  margin-right: 0.4rem;\n}\n.bar-img img[data-v-6c99bb84] {\n  width: 1rem;\n  height: 1rem;\n}\n.bar-name[data-v-6c99bb84] {\n  font-size: 16px;\n  line-height: 24px;\n  font-weight: bold;\n  margin-bottom: 5px;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 1;\n  overflow: hidden;\n}\n.home .bar-name[data-v-6c99bb84] {\n  color: #fff;\n}\n.bar-address[data-v-6c99bb84] {\n  font-size: 12px;\n  line-height: 1.5;\n  color: #ccc;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 1;\n  overflow: hidden;\n}\n.home .bar-address[data-v-6c99bb84] {\n  color: #61667a;\n}\n.bar-distance[data-v-6c99bb84] {\n  margin-left: 0.1rem;\n}\n.home .bar-distance[data-v-6c99bb84] {\n  color: #61667a;\n}\n.bar-distance span[data-v-6c99bb84] {\n  font-size: 13px;\n}\n.bar-distance .svg-icon[data-v-6c99bb84] {\n  width: 0.32rem;\n  height: 0.32rem;\n}\n.bar-money[data-v-6c99bb84] {\n  padding: 0 10px;\n  margin-left: 10px;\n}\n.bar-money[data-v-6c99bb84]:before {\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  width: 1px;\n  background-color: #ddd;\n  content: "";\n}\n',"",{version:3,sources:["G:/projects/nbbp2.0.git/src/components/Center/BarsList.vue"],names:[],mappings:";AACA;EACE,wBAAwB;CACzB;AACD;EACE,mBAAmB;EACnB,0BAA0B;CAC3B;AACD;EACE,YAAY;EACZ,qBAAqB;CACtB;AACD;EACE,YAAY;EACZ,aAAa;CACd;AACD;EACE,gBAAgB;EAChB,kBAAkB;EAClB,kBAAkB;EAClB,mBAAmB;EACnB,qBAAqB;EACrB,6BAA6B;EAC7B,sBAAsB;EACtB,iBAAiB;CAClB;AACD;EACE,YAAY;CACb;AACD;EACE,gBAAgB;EAChB,iBAAiB;EACjB,YAAY;EACZ,qBAAqB;EACrB,6BAA6B;EAC7B,sBAAsB;EACtB,iBAAiB;CAClB;AACD;EACE,eAAe;CAChB;AACD;EACE,oBAAoB;CACrB;AACD;EACE,eAAe;CAChB;AACD;EACE,gBAAgB;CACjB;AACD;EACE,eAAe;EACf,gBAAgB;CACjB;AACD;EACE,gBAAgB;EAChB,kBAAkB;CACnB;AACD;EACE,mBAAmB;EACnB,QAAQ;EACR,OAAO;EACP,UAAU;EACV,WAAW;EACX,uBAAuB;EACvB,YAAY;CACb",file:"BarsList.vue",sourcesContent:['\n.bar-item[data-v-6c99bb84] {\n  padding: 0.36rem 0.3rem;\n}\n.home .bar-item[data-v-6c99bb84] {\n  margin-bottom: 1px;\n  background-color: #181b2a;\n}\n.bar-img[data-v-6c99bb84] {\n  width: 1rem;\n  margin-right: 0.4rem;\n}\n.bar-img img[data-v-6c99bb84] {\n  width: 1rem;\n  height: 1rem;\n}\n.bar-name[data-v-6c99bb84] {\n  font-size: 16px;\n  line-height: 24px;\n  font-weight: bold;\n  margin-bottom: 5px;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 1;\n  overflow: hidden;\n}\n.home .bar-name[data-v-6c99bb84] {\n  color: #fff;\n}\n.bar-address[data-v-6c99bb84] {\n  font-size: 12px;\n  line-height: 1.5;\n  color: #ccc;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 1;\n  overflow: hidden;\n}\n.home .bar-address[data-v-6c99bb84] {\n  color: #61667a;\n}\n.bar-distance[data-v-6c99bb84] {\n  margin-left: 0.1rem;\n}\n.home .bar-distance[data-v-6c99bb84] {\n  color: #61667a;\n}\n.bar-distance span[data-v-6c99bb84] {\n  font-size: 13px;\n}\n.bar-distance .svg-icon[data-v-6c99bb84] {\n  width: 0.32rem;\n  height: 0.32rem;\n}\n.bar-money[data-v-6c99bb84] {\n  padding: 0 10px;\n  margin-left: 10px;\n}\n.bar-money[data-v-6c99bb84]:before {\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  width: 1px;\n  background-color: #ddd;\n  content: "";\n}\n'],sourceRoot:""}])},cHu4:function(e,n,t){"use strict";var a=t("diSF"),i=t.n(a),o=t("NXHL"),r=t.n(o),s={"北京市":"110100","天津市":"120100","上海市":"310100","重庆市":"500100"},l=function(e,n){var t=i()(e,function(t,a){var i="";return 2===a?(i=r()(n,function(n){return n.name===e[1]})||{value:"__"},s[e[0]]&&(i={value:s[e[0]]}),r()(n,function(e){return e.name===t&&e.parent===i.value})):1===a&&s[e[0]]?{value:s[e[0]]}:r()(n,function(e){return e.name===t})});return i()(t,function(e){return e?e.value:"__"}).join(" ")},c=t("NE4E"),d=t("7Ah8"),u={name:"x-address",components:{PopupPicker:d.a},props:{title:{type:String,required:!0},value:{type:Array,default:function(){return[]}},rawValue:Boolean,list:{type:Array,required:!0},labelWidth:String,inlineDesc:String,placeholder:String,hideDistrict:Boolean,valueTextAlign:String,confirmText:String,cancelText:String,displayFormat:{type:Function,default:function(e,n){return n}},popupStyle:Object,popupTitle:String,show:Boolean},created:function(){if(this.currentValue.length&&this.rawValue){var e=l(this.currentValue,this.list);/__/.test(e)?(console.error("Vux: Wrong address value",this.currentValue),this.currentValue=[]):this.currentValue=e.split(" ")}this.show&&(this.showValue=!0)},methods:{emitHide:function(e){this.$emit("on-hide",e)},getAddressName:function(){return Object(c.a)(this.value,this.list)},onShadowChange:function(e,n){this.$emit("on-shadow-change",e,n)}},data:function(){return{currentValue:this.value,showValue:!1}},computed:{nameValue:function(){return Object(c.a)(this.currentValue,this.list)},labelClass:function(){return{"vux-cell-justify":"justify"===this.$parent.labelAlign||"justify"===this.$parent.$parent.labelAlign}}},watch:{currentValue:function(e){this.$emit("input",e)},value:function(e){if(e.length&&!/\d+/.test(e[0])){var n=l(e,this.list).split(" ");if("__"!==n[0]&&"__"!==n[1])return void(this.currentValue=n)}this.currentValue=e},show:function(e){this.showValue=e},showValue:function(e){this.$emit("update:show",e)}}},A=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("popup-picker",{attrs:{"fixed-columns":e.hideDistrict?2:0,columns:3,data:e.list,title:e.title,"show-name":"","inline-desc":e.inlineDesc,placeholder:e.placeholder,"value-text-align":e.valueTextAlign,"confirm-text":e.confirmText,"cancel-text":e.cancelText,"display-format":e.displayFormat,"popup-style":e.popupStyle,"popup-title":e.popupTitle,show:e.showValue},on:{"on-hide":e.emitHide,"on-show":function(n){e.$emit("on-show")},"update:show":function(n){e.showValue=n},"on-shadow-change":e.onShadowChange},scopedSlots:e._u([{key:"title",fn:function(n){return[e._t("title",[n.labelTitle?t("label",{class:[n.labelClass,e.labelClass],style:n.labelStyle,domProps:{innerHTML:e._s(n.labelTitle)}}):e._e()],{labelClass:n.labelClass,labelStyle:n.labelStyles,labelTitle:n.title})]}}]),model:{value:e.currentValue,callback:function(n){e.currentValue=n},expression:"currentValue"}})},h=[],b={render:A,staticRenderFns:h},f=b,p=t("VU/8"),m=p(u,f,!1,null,null,null);n.a=m.exports},ssU6:function(e,n,t){n=e.exports=t("FZ+f")(!0),n.push([e.i,"\n.home-header[data-v-e5d18e3e] {\n  line-height: 0.8rem;\n  height: 0.8rem;\n  text-align: center;\n  color: #fff;\n  position: relative;\n  font-size: 0;\n}\n.home-header .h-title[data-v-e5d18e3e] {\n  vertical-align: middle;\n}\n.home-header .city-now[data-v-e5d18e3e] {\n  position: absolute;\n  left: 0.3rem;\n  top: 0;\n  font-size: 14px;\n}\n.home-header .hot-icon[data-v-e5d18e3e] {\n  width: 24px;\n  height: 24px;\n  fill: #fd2a3d;\n  margin-right: 4px;\n  vertical-align: middle;\n}\n.home-header .arrow-down-icon[data-v-e5d18e3e] {\n  margin-left: 4px;\n}\n.container[data-v-e5d18e3e] .weui-loadmore__tips {\n  color: #fff;\n}\n","",{version:3,sources:["G:/projects/nbbp2.0.git/src/pages/Home.vue"],names:[],mappings:";AACA;EACE,oBAAoB;EACpB,eAAe;EACf,mBAAmB;EACnB,YAAY;EACZ,mBAAmB;EACnB,aAAa;CACd;AACD;EACE,uBAAuB;CACxB;AACD;EACE,mBAAmB;EACnB,aAAa;EACb,OAAO;EACP,gBAAgB;CACjB;AACD;EACE,YAAY;EACZ,aAAa;EACb,cAAc;EACd,kBAAkB;EAClB,uBAAuB;CACxB;AACD;EACE,iBAAiB;CAClB;AACD;EACE,YAAY;CACb",file:"Home.vue",sourcesContent:["\n.home-header[data-v-e5d18e3e] {\n  line-height: 0.8rem;\n  height: 0.8rem;\n  text-align: center;\n  color: #fff;\n  position: relative;\n  font-size: 0;\n}\n.home-header .h-title[data-v-e5d18e3e] {\n  vertical-align: middle;\n}\n.home-header .city-now[data-v-e5d18e3e] {\n  position: absolute;\n  left: 0.3rem;\n  top: 0;\n  font-size: 14px;\n}\n.home-header .hot-icon[data-v-e5d18e3e] {\n  width: 24px;\n  height: 24px;\n  fill: #fd2a3d;\n  margin-right: 4px;\n  vertical-align: middle;\n}\n.home-header .arrow-down-icon[data-v-e5d18e3e] {\n  margin-left: 4px;\n}\n.container[data-v-e5d18e3e] .weui-loadmore__tips {\n  color: #fff;\n}\n"],sourceRoot:""}])},x3yg:function(e,n,t){var a=t("ssU6");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("47e08434",a,!0)}});
//# sourceMappingURL=8.7499cd22f49766fd6b1e.js.map