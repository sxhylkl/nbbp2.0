webpackJsonp([23],{"0L4D":function(t,n,e){"use strict";function a(t){e("J+Du")}Object.defineProperty(n,"__esModule",{value:!0});var o=e("woOf"),i=e.n(o),s=e("pDNl"),r=e("rHil"),d=e("1DHf"),l=e("2sLL"),c=e("jd+X"),p=e("7Otq"),m=e.n(p),u=e("gyMJ"),f={name:"BasicBusiness",components:{XInput:s.a,Group:r.a,Cell:d.a,XButton:l.a,Upload:c.a},beforeRouteEnter:function(t,n,e){document.title="基础信息",e()},data:function(){return{showTip:!1,mapVisible:!1,mapLoad:!1,defaultLogo:m.a,showLogo:"",loading:!1,form:{id:this.$route.params.id?this.$route.params.id:"",name:"",logo:"",address:"",locationLng:"",locationLat:"",province_name:"",city_name:"",area_name:""}}},created:function(){var t=this;Object(u.p)({ht_id:this.$route.params.id}).then(function(n){t.form=n.result,t.showLogo=n.result.logo,n.result.province_id||(t.showTip=!0)})},mounted:function(){document.getElementById("iframe").style.width=window.innerWidth+"px",document.getElementById("iframe").style.height=window.innerHeight+"px",window.addEventListener("message",this.onSelectAddress,!1)},beforeDestroy:function(){window.removeEventListener("message",this.onSelectAddress,!1)},methods:{updateInfo:function(){var t=this;if(""===this.form.name)return void this.$vux.toast.show({text:"酒吧名称不能为空"});this.loading=!0,Object(u.S)(this.form).then(function(n){t.$vux.toast.show({text:"修改成功"}),t.$route.query.toMain&&t.$router.replace("/Main/"+t.$route.params.id)}).finally(function(){t.loading=!1})},afterClip:function(t){this.form.logo=t,this.showLogo=t},onSelectAddress:function(t){if(!t.data.type){var n=JSON.parse(t.data),e={address:n.address,locationLng:n.point.lng,locationLat:n.point.lat,province_name:n.addressComponents.province,city_name:n.addressComponents.city,area_name:n.addressComponents.district};this.form=i()({},this.form,e),this.mapVisible=!1,console.log(t.data)}},showMap:function(){var t=this;this.mapVisible=!0,this.mapLoad||setTimeout(function(){document.getElementById("iframe").src="./map/index.html",t.mapLoad=!0},300)}}},g=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"container min-h"},[e("div",{staticClass:"inner"},[e("div",{staticClass:"top flex flex-v flex-align-center"},[e("upload",{staticClass:"pr",attrs:{name:"upload-logo",limitSize:400,"is-crop":!0,isFlag:1,isLogo:!0},on:{"on-clip":t.afterClip}},[t.showLogo?e("img",{staticClass:"circle",attrs:{src:t.$options.filters.prefixImageUrl(t.showLogo)}}):e("img",{attrs:{src:t.defaultLogo}}),t._v(" "),e("label",{staticClass:"n-label",attrs:{for:"upload-logo"}})]),t._v(" "),e("p",[t._v("酒吧logo，将展示在二维码、酒吧首页上")])],1),t._v(" "),e("group",{attrs:{"label-width":"4.5em","label-margin-right":"2em","label-align":"right"}},[e("x-input",{attrs:{title:"昵&emsp;&emsp;称"},model:{value:t.form.name,callback:function(n){t.$set(t.form,"name",n)},expression:"form.name"}}),t._v(" "),e("cell",{attrs:{title:"酒吧地址",value:t.form.address,"is-link":"","value-align":"left"},nativeOn:{click:function(n){t.showMap(n)}}})],1),t._v(" "),e("div",{staticClass:"bottom_abs"},[e("x-button",{attrs:{gradients:["#1D62F0","#1D62F0"],"show-loading":t.loading},nativeOn:{click:function(n){t.updateInfo(n)}}},[t._v("保存")])],1),t._v(" "),e("transition",{attrs:{name:"slide-fade"}},[e("iframe",{directives:[{name:"show",rawName:"v-show",value:t.mapVisible,expression:"mapVisible"}],staticStyle:{"background-color":"#fff"},attrs:{src:"",id:"iframe",frameborder:"0",allowTransparency:"true"}})])],1),t._v(" "),t.showTip?e("div",{staticClass:"tip f13"},[t._v("提示: 如果您的当前酒吧未填写地址将不会出现在牛霸酒吧列表页，请尽快填写。")]):t._e()])},A=[],h={render:g,staticRenderFns:A},v=h,C=e("VU/8"),b=a,x=C(f,v,!1,b,"data-v-ac62b568",null);n.default=x.exports},"7d8+":function(t,n,e){n=t.exports=e("FZ+f")(!0),n.push([t.i,"\n.top[data-v-ac62b568] {\n  padding: 15px 0;\n}\n.top img[data-v-ac62b568] {\n  width: 60px;\n  height: 60px;\n}\n.top p[data-v-ac62b568] {\n  font-size: 12px;\n}\n#iframe[data-v-ac62b568] {\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 1;\n}\n.tip[data-v-ac62b568] {\n  margin: 15px 10px;\n  padding: 5px;\n  background-color: #d2d2d2;\n  color: #939393;\n  border-radius: 3px;\n}\n","",{version:3,sources:["G:/projects/nbbp2.0.git/src/pages/BasicBusiness.vue"],names:[],mappings:";AACA;EACE,gBAAgB;CACjB;AACD;EACE,YAAY;EACZ,aAAa;CACd;AACD;EACE,gBAAgB;CACjB;AACD;EACE,gBAAgB;EAChB,OAAO;EACP,SAAS;EACT,UAAU;EACV,QAAQ;EACR,WAAW;CACZ;AACD;EACE,kBAAkB;EAClB,aAAa;EACb,0BAA0B;EAC1B,eAAe;EACf,mBAAmB;CACpB",file:"BasicBusiness.vue",sourcesContent:["\n.top[data-v-ac62b568] {\n  padding: 15px 0;\n}\n.top img[data-v-ac62b568] {\n  width: 60px;\n  height: 60px;\n}\n.top p[data-v-ac62b568] {\n  font-size: 12px;\n}\n#iframe[data-v-ac62b568] {\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 1;\n}\n.tip[data-v-ac62b568] {\n  margin: 15px 10px;\n  padding: 5px;\n  background-color: #d2d2d2;\n  color: #939393;\n  border-radius: 3px;\n}\n"],sourceRoot:""}])},"J+Du":function(t,n,e){var a=e("7d8+");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e("rjj0")("22f3a91c",a,!0)}});
//# sourceMappingURL=23.d5c52959b15fd2924687.js.map