webpackJsonp([12],{C6p7:function(t,e,n){e=t.exports=n("FZ+f")(!1),e.push([t.i,"\n.home-header[data-v-190d19c8] {\n  line-height: 0.8rem;\n  height: 0.8rem;\n  text-align: center;\n  color: #fff;\n  position: relative;\n  font-size: 0;\n}\n.home-header .h-title[data-v-190d19c8] {\n  vertical-align: middle;\n}\n.home-header .city-now[data-v-190d19c8] {\n  position: absolute;\n  left: 0.3rem;\n  top: 0;\n  font-size: 14px;\n}\n.home-header .hot-icon[data-v-190d19c8] {\n  width: 24px;\n  height: 24px;\n  fill: #fd2a3d;\n  margin-right: 4px;\n  vertical-align: middle;\n}\n.home-header .arrow-down-icon[data-v-190d19c8] {\n  margin-left: 4px;\n}\n.container[data-v-190d19c8] .weui-loadmore__tips {\n  color: #fff;\n}\n",""])},HXef:function(t,e,n){"use strict";function a(t){n("KVNT")}Object.defineProperty(e,"__esModule",{value:!0});var i=n("Q6pl"),s=n("cHu4"),o=n("oAV5"),r=n("gyMJ"),l=n("6xed"),c={data:function(){return{adsValue:["330000","330200"],addressData:[],showAddress:!1,barsList:[],userAllow:!0,userPosition:{lat:"",lng:""},loading:!0}},beforeRouteEnter:function(t,e,n){document.title="牛霸霸屏",n()},created:function(){var t=this;this.$wechat.ready(function(){t.$wechat.getLocation({type:"wgs84",success:function(e){t.getAllRegions(e.latitude,e.longitude)},fail:function(){t.getAllRegions(32.06898,118.803473)}})})},mounted:function(){},methods:{getAllRegions:function(t,e){var n=this;Object(r._1)().then(function(a){for(var i=0;i<a.result.length&&"100000"===a.result[i].parent;i++)delete a.result[i].parent;n.addressData=a.result,n.getPosition(t,e)})},closeAddress:function(t){var e=this;if(!t)return!1;var n=this.addressData.find(function(t,n){return~~t.value==~~e.adsValue[1]});this.loading=!0,n?Object(r.D)({region_code:n.value}).then(function(t){Array.isArray(t.result)&&(e.userAllow?t.result.map(function(t,n){t.distance=Object(o.i)(t.locationLat,t.locationLng,e.userPosition.lat,e.userPosition.lng)}):t.result.map(function(t,e){t.distance="未知"}),t.result.sort(function(t,e){return t.distance-e.distance}),e.barsList=t.result)}).finally(function(){e.loading=!1}):this.loading=!1},getPosition:function(t,e){var n=this;this.$jsonp("http://api.map.baidu.com/geocoder/v2/",{location:t+","+e,coordtype:"wgs84ll",ret_coordtype:"bd09ll",output:"json",ak:"gqwAbhpew0rdL9sZei9dL2PQWGqW7beB"}).then(function(t){var e=t.result.addressComponent,a=Object(o.g)(e.province,e.city,n.addressData);a?(n.adsValue=[a.province_id,a.city_id],n.userPosition.lng=t.result.location.lng,n.userPosition.lat=t.result.location.lat,n.closeAddress(!0)):(n.$vux.toast.show({text:"当前城市暂无入驻酒吧,现已切换到宁波市",width:"15em"}),n.getAllRegions(29.88525897,121.57900597))})},wxCoordsToBaidu:function(t){var e=this,n="";t.forEach(function(t,e){n+=t.locationLat+","+t.locationLng+";"}),n=n.substring(0,n.length-1),this.$jsonp("http://api.map.baidu.com/geoconv/v1/",{coords:n,from:1,to:5,ak:"gqwAbhpew0rdL9sZei9dL2PQWGqW7beB"}).then(function(n){if(console.log(n),n.result){var a=[];n.result.forEach(function(t,e){a.push(Object(o.i)(t.y,t.x,30.575429778924,114.31992734521))}),t.map(function(t,e){t.distance=a[e]}),e.barsList=t}}).catch(function(t){console.log(t)})}},computed:{cityName:function(){var t=this,e=this.addressData.find(function(e,n){return e.value===t.adsValue[1]});return e?e.name:""}},components:{BarsList:i.a,XAddress:s.a,InlineLoading:l.a}},u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container flex flex-v",staticStyle:{"background-color":"#121420",height:"100%"}},[n("div",{staticClass:"home-header"},[n("svg-icon",{attrs:{"icon-class":"hot",className:"hot-icon"}}),n("span",{staticClass:"h-title f16"},[t._v("热门推荐")]),n("span",{staticClass:"city-now",on:{click:function(e){t.showAddress=!0}}},[t._v(t._s(t.cityName)),n("svg-icon",{attrs:{"icon-class":"arrow-down",className:"arrow-down-icon"}})],1)],1),t._v(" "),n("div",{staticClass:"flex-1 scroll"},[t.loading?n("inline-loading",{attrs:{color:"#f31374",bgColor:"rgba(255, 255, 255, 0.2)"}}):t._e(),t._v(" "),n("BarsList",{attrs:{barsList:t.barsList,enter:"home"}})],1),t._v(" "),n("x-address",{staticStyle:{display:"none"},attrs:{"hide-district":"","popup-title":"选择城市",title:"",list:t.addressData,placeholder:"请选择地址",show:t.showAddress},on:{"on-hide":t.closeAddress,"update:show":function(e){t.showAddress=e}},model:{value:t.adsValue,callback:function(e){t.adsValue=e},expression:"adsValue"}})],1)},d=[],h={render:u,staticRenderFns:d},f=h,p=n("VU/8"),b=a,m=p(c,f,!1,b,"data-v-190d19c8",null);e.default=m.exports},KVNT:function(t,e,n){var a=n("C6p7");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("rjj0")("67e093b5",a,!0)},Q6pl:function(t,e,n){"use strict";function a(t){n("uP3V")}var i={props:["barsList","enter"],components:{},data:function(){return{}},mounted:function(){},computed:{list:function(){return this.barsList?this.barsList:[]}},methods:{pageToBarInfo:function(t,e){"home"===this.enter?this.$router.push({path:"/Main/"+t}):this.$router.push({path:"/AgentBarInfo",query:{id:t,type:3}})}},filters:{distance:function(t){return"string"==typeof t?t:Number(t/1e3).toFixed(2)+"km"}}},s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bar-list",class:{home:"home"==t.enter}},[n("ul",t._l(t.list,function(e,a){return n("li",{key:a,staticClass:"bar-item flex",on:{click:function(n){t.pageToBarInfo(e.id,e.name)}}},[n("div",{staticClass:"bar-img"},[n("img",{staticClass:"circle",attrs:{src:t._f("prefixImageUrl")(e.logo),alt:""}})]),t._v(" "),n("div",{staticClass:"bar-info flex flex-1 flex-v flex-pack-center"},[n("h2",{staticClass:"bar-name"},[t._v(t._s(e.name))]),t._v(" "),n("div",{staticClass:"bar-address"},[t._v(t._s(e.area_name)+t._s(e.address))])]),t._v(" "),"home"==t.enter?n("div",{staticClass:"bar-distance flex flex flex-align-center"},[n("svg-icon",{attrs:{"icon-class":"position"}}),n("span",[t._v(t._s(t._f("distance")(e.distance)))])],1):t._e(),t._v(" "),"home"!=t.enter?n("div",{staticClass:"tc bar-money pr flex flex-v flex-pack-center"},[n("p",{staticClass:"f16",staticStyle:{color:"red"}},[t._v(t._s(e.agent_balance))]),t._v(" "),n("p",{staticClass:"f13",staticStyle:{color:"#818181"}},[t._v("可提现收益")])]):t._e()])}))])},o=[],r={render:s,staticRenderFns:o},l=r,c=n("VU/8"),u=a,d=c(i,l,!1,u,"data-v-6c99bb84",null);e.a=d.exports},cHu4:function(t,e,n){"use strict";var a=n("diSF"),i=n.n(a),s=n("NXHL"),o=n.n(s),r={"北京市":"110100","天津市":"120100","上海市":"310100","重庆市":"500100"},l=function(t,e){var n=i()(t,function(n,a){var i="";return 2===a?(i=o()(e,function(e){return e.name===t[1]})||{value:"__"},r[t[0]]&&(i={value:r[t[0]]}),o()(e,function(t){return t.name===n&&t.parent===i.value})):1===a&&r[t[0]]?{value:r[t[0]]}:o()(e,function(t){return t.name===n})});return i()(n,function(t){return t?t.value:"__"}).join(" ")},c=n("NE4E"),u=n("7Ah8"),d={name:"x-address",components:{PopupPicker:u.a},props:{title:{type:String,required:!0},value:{type:Array,default:function(){return[]}},rawValue:Boolean,list:{type:Array,required:!0},labelWidth:String,inlineDesc:String,placeholder:String,hideDistrict:Boolean,valueTextAlign:String,confirmText:String,cancelText:String,displayFormat:{type:Function,default:function(t,e){return e}},popupStyle:Object,popupTitle:String,show:Boolean},created:function(){if(this.currentValue.length&&this.rawValue){var t=l(this.currentValue,this.list);/__/.test(t)?(console.error("Vux: Wrong address value",this.currentValue),this.currentValue=[]):this.currentValue=t.split(" ")}this.show&&(this.showValue=!0)},methods:{emitHide:function(t){this.$emit("on-hide",t)},getAddressName:function(){return Object(c.a)(this.value,this.list)},onShadowChange:function(t,e){this.$emit("on-shadow-change",t,e)}},data:function(){return{currentValue:this.value,showValue:!1}},computed:{nameValue:function(){return Object(c.a)(this.currentValue,this.list)},labelClass:function(){return{"vux-cell-justify":"justify"===this.$parent.labelAlign||"justify"===this.$parent.$parent.labelAlign}}},watch:{currentValue:function(t){this.$emit("input",t)},value:function(t){if(t.length&&!/\d+/.test(t[0])){var e=l(t,this.list).split(" ");if("__"!==e[0]&&"__"!==e[1])return void(this.currentValue=e)}this.currentValue=t},show:function(t){this.showValue=t},showValue:function(t){this.$emit("update:show",t)}}},h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("popup-picker",{attrs:{"fixed-columns":t.hideDistrict?2:0,columns:3,data:t.list,title:t.title,"show-name":"","inline-desc":t.inlineDesc,placeholder:t.placeholder,"value-text-align":t.valueTextAlign,"confirm-text":t.confirmText,"cancel-text":t.cancelText,"display-format":t.displayFormat,"popup-style":t.popupStyle,"popup-title":t.popupTitle,show:t.showValue},on:{"on-hide":t.emitHide,"on-show":function(e){t.$emit("on-show")},"update:show":function(e){t.showValue=e},"on-shadow-change":t.onShadowChange},scopedSlots:t._u([{key:"title",fn:function(e){return[t._t("title",[e.labelTitle?n("label",{class:[e.labelClass,t.labelClass],style:e.labelStyle,domProps:{innerHTML:t._s(e.labelTitle)}}):t._e()],{labelClass:e.labelClass,labelStyle:e.labelStyles,labelTitle:e.title})]}}]),model:{value:t.currentValue,callback:function(e){t.currentValue=e},expression:"currentValue"}})},f=[],p={render:h,staticRenderFns:f},b=p,m=n("VU/8"),v=m(d,b,!1,null,null,null);e.a=v.exports},jLPR:function(t,e,n){e=t.exports=n("FZ+f")(!1),e.push([t.i,'\n.bar-item[data-v-6c99bb84] {\n  padding: 0.36rem 0.3rem;\n}\n.home .bar-item[data-v-6c99bb84] {\n  margin-bottom: 1px;\n  background-color: #181b2a;\n}\n.bar-img[data-v-6c99bb84] {\n  width: 1rem;\n  margin-right: 0.4rem;\n}\n.bar-img img[data-v-6c99bb84] {\n  width: 1rem;\n  height: 1rem;\n}\n.bar-name[data-v-6c99bb84] {\n  font-size: 16px;\n  line-height: 24px;\n  font-weight: bold;\n  margin-bottom: 5px;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 1;\n  overflow: hidden;\n}\n.home .bar-name[data-v-6c99bb84] {\n  color: #fff;\n}\n.bar-address[data-v-6c99bb84] {\n  font-size: 12px;\n  line-height: 1.5;\n  color: #ccc;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 1;\n  overflow: hidden;\n}\n.home .bar-address[data-v-6c99bb84] {\n  color: #61667a;\n}\n.bar-distance[data-v-6c99bb84] {\n  margin-left: 0.1rem;\n}\n.home .bar-distance[data-v-6c99bb84] {\n  color: #61667a;\n}\n.bar-distance span[data-v-6c99bb84] {\n  font-size: 13px;\n}\n.bar-distance .svg-icon[data-v-6c99bb84] {\n  width: 0.32rem;\n  height: 0.32rem;\n}\n.bar-money[data-v-6c99bb84] {\n  padding: 0 10px;\n  margin-left: 10px;\n}\n.bar-money[data-v-6c99bb84]:before {\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  width: 1px;\n  background-color: #ddd;\n  content: "";\n}\n',""])},uP3V:function(t,e,n){var a=n("jLPR");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("rjj0")("ed2057e0",a,!0)}});