webpackJsonp([25],{"0L4D":function(t,e,n){"use strict";function a(t){n("qC2W")}Object.defineProperty(e,"__esModule",{value:!0});var i=n("woOf"),o=n.n(i),s=n("pDNl"),r=n("rHil"),l=n("1DHf"),d=n("2sLL"),c=n("jd+X"),p=n("7Otq"),m=n.n(p),f=n("gyMJ"),u={name:"BasicBusiness",components:{XInput:s.a,Group:r.a,Cell:l.a,XButton:d.a,Upload:c.a},beforeRouteEnter:function(t,e,n){document.title="基础信息",n()},data:function(){return{mapVisible:!1,mapLoad:!1,defaultLogo:m.a,showLogo:"",loading:!1,form:{id:this.$route.params.id?this.$route.params.id:"",name:"",logo:"",address:"",locationLng:"",locationLat:"",province_name:"",city_name:"",area_name:""}}},created:function(){var t=this;Object(f.p)({ht_id:this.$route.params.id}).then(function(e){t.form=e.result,t.showLogo=e.result.logo})},mounted:function(){document.getElementById("iframe").style.width=window.innerWidth+"px",document.getElementById("iframe").style.height=window.innerHeight+"px",window.addEventListener("message",this.onSelectAddress,!1)},beforeDestroy:function(){window.removeEventListener("message",this.onSelectAddress,!1)},methods:{updateInfo:function(){var t=this;if(""===this.form.name)return void this.$vux.toast.show({text:"酒吧名称不能为空"});this.loading=!0,Object(f.S)(this.form).then(function(e){t.$vux.toast.show({text:"修改成功"})}).finally(function(){t.loading=!1})},afterClip:function(t){this.form.logo=t,this.showLogo=t},onSelectAddress:function(t){if(!t.data.type){var e=JSON.parse(t.data),n={address:e.address,locationLng:e.point.lng,locationLat:e.point.lat,province_name:e.addressComponents.province,city_name:e.addressComponents.city,area_name:e.addressComponents.district};this.form=o()({},this.form,n),this.mapVisible=!1,console.log(t.data)}},showMap:function(){var t=this;this.mapVisible=!0,this.mapLoad||setTimeout(function(){document.getElementById("iframe").src="./map/index.html",t.mapLoad=!0},300)}}},g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container min-h"},[n("div",{staticClass:"inner"},[n("div",{staticClass:"top flex flex-v flex-align-center"},[n("upload",{staticClass:"pr",attrs:{name:"upload-logo",limitSize:400,"is-crop":!0,isFlag:1},on:{"on-clip":t.afterClip}},[t.showLogo?n("img",{staticClass:"circle",attrs:{src:t.$options.filters.prefixImageUrl(t.showLogo)}}):n("img",{attrs:{src:t.defaultLogo}}),t._v(" "),n("label",{staticClass:"n-label",attrs:{for:"upload-logo"}})]),t._v(" "),n("p",[t._v("酒吧logo，将展示在二维码、酒吧首页上")])],1),t._v(" "),n("group",{attrs:{"label-width":"4.5em","label-margin-right":"2em","label-align":"right"}},[n("x-input",{attrs:{title:"昵&emsp;&emsp;称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),t._v(" "),n("cell",{attrs:{title:"酒吧地址",value:t.form.address,"is-link":"","value-align":"left"},nativeOn:{click:function(e){t.showMap(e)}}})],1),t._v(" "),n("div",{staticClass:"bottom_abs"},[n("x-button",{attrs:{gradients:["#1D62F0","#1D62F0"],"show-loading":t.loading},nativeOn:{click:function(e){t.updateInfo(e)}}},[t._v("保存")])],1),t._v(" "),n("transition",{attrs:{name:"slide-fade"}},[n("iframe",{directives:[{name:"show",rawName:"v-show",value:t.mapVisible,expression:"mapVisible"}],staticStyle:{"background-color":"#fff"},attrs:{src:"",id:"iframe",frameborder:"0",allowTransparency:"true"}})])],1)])},h=[],v={render:g,staticRenderFns:h},A=v,C=n("VU/8"),x=a,w=C(u,A,!1,x,"data-v-24088022",null);e.default=w.exports},E26Q:function(t,e,n){e=t.exports=n("FZ+f")(!0),e.push([t.i,"\n.top[data-v-24088022] {\n  padding: 15px 0;\n}\n.top img[data-v-24088022] {\n  width: 60px;\n  height: 60px;\n}\n.top p[data-v-24088022] {\n  font-size: 12px;\n}\n#iframe[data-v-24088022] {\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 1;\n}\n","",{version:3,sources:["G:/projects/nbbp2.0.git/src/pages/BasicBusiness.vue"],names:[],mappings:";AACA;EACE,gBAAgB;CACjB;AACD;EACE,YAAY;EACZ,aAAa;CACd;AACD;EACE,gBAAgB;CACjB;AACD;EACE,gBAAgB;EAChB,OAAO;EACP,SAAS;EACT,UAAU;EACV,QAAQ;EACR,WAAW;CACZ",file:"BasicBusiness.vue",sourcesContent:["\n.top[data-v-24088022] {\n  padding: 15px 0;\n}\n.top img[data-v-24088022] {\n  width: 60px;\n  height: 60px;\n}\n.top p[data-v-24088022] {\n  font-size: 12px;\n}\n#iframe[data-v-24088022] {\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 1;\n}\n"],sourceRoot:""}])},qC2W:function(t,e,n){var a=n("E26Q");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("rjj0")("15e7f32d",a,!0)}});
//# sourceMappingURL=25.de7619baec62ef731dd9.js.map