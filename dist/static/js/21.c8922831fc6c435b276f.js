webpackJsonp([21],{"0L4D":function(t,e,n){"use strict";function o(t){n("mN+V")}Object.defineProperty(e,"__esModule",{value:!0});var a=n("woOf"),i=n.n(a),s=n("pDNl"),r=n("rHil"),d=n("1DHf"),l=n("2sLL"),c=n("jd+X"),m=n("7Otq"),p=n.n(m),f=n("gyMJ"),u={name:"BasicBusiness",components:{XInput:s.a,Group:r.a,Cell:d.a,XButton:l.a,Upload:c.a},beforeRouteEnter:function(t,e,n){document.title="基础信息",n()},data:function(){return{mapVisible:!1,mapLoad:!1,defaultLogo:p.a,showLogo:"",loading:!1,form:{id:this.$route.params.id?this.$route.params.id:"",name:"",logo:"",address:"",locationLng:"",locationLat:"",province_name:"",city_name:"",area_name:""}}},created:function(){var t=this;Object(f.o)({ht_id:this.$route.params.id}).then(function(e){t.form=e.result,t.showLogo=e.result.logo})},mounted:function(){document.getElementById("iframe").style.width=window.innerWidth+"px",document.getElementById("iframe").style.height=window.innerHeight+"px",window.addEventListener("message",this.onSelectAddress,!1)},beforeDestroy:function(){window.removeEventListener("message",this.onSelectAddress,!1)},methods:{updateInfo:function(){var t=this;if(""===this.form.name)return void this.$vux.toast.show({text:"酒吧名称不能为空"});this.loading=!0,Object(f.N)(this.form).then(function(e){t.$vux.toast.show({text:"修改成功"})}).finally(function(){t.loading=!1})},logoUploadPreview:function(t){console.log(t),this.form.logo=t,this.showLogo=t},onSelectAddress:function(t){if(!t.data.type){var e=JSON.parse(t.data),n={address:e.address,locationLng:e.point.lng,locationLat:e.point.lat,province_name:e.addressComponents.province,city_name:e.addressComponents.city,area_name:e.addressComponents.district};this.form=i()({},this.form,n),this.mapVisible=!1,console.log(t.data)}},showMap:function(){var t=this;this.mapVisible=!0,this.mapLoad||setTimeout(function(){document.getElementById("iframe").src="./map/index.html",t.mapLoad=!0},300)}}},g=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container min-h"},[o("div",{staticClass:"inner"},[o("div",{staticClass:"top flex flex-v flex-align-center"},[o("upload",{staticClass:"pr",attrs:{name:"upload-logo",limitSize:400},on:{"on-preview":t.logoUploadPreview}},[t.showLogo?o("img",{staticClass:"circle",attrs:{src:t.$options.filters.prefixImageUrl(t.showLogo)}}):o("img",{attrs:{src:n("uVhH")}}),t._v(" "),o("label",{staticClass:"n-label",attrs:{for:"upload-logo"}})]),t._v(" "),o("p",[t._v("酒吧logo，将展示在二维码、酒吧首页上")])],1),t._v(" "),o("group",{attrs:{"label-width":"4.5em","label-margin-right":"2em","label-align":"right"}},[o("x-input",{attrs:{title:"昵&emsp;&emsp;称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),t._v(" "),o("cell",{attrs:{title:"酒吧地址",value:t.form.address,"is-link":"","value-align":"left"},nativeOn:{click:function(e){t.showMap(e)}}})],1),t._v(" "),o("div",{staticClass:"bottom_abs"},[o("x-button",{attrs:{gradients:["#1D62F0","#1D62F0"],"show-loading":t.loading},nativeOn:{click:function(e){t.updateInfo(e)}}},[t._v("保存")])],1),t._v(" "),o("transition",{attrs:{name:"slide-fade"}},[o("iframe",{directives:[{name:"show",rawName:"v-show",value:t.mapVisible,expression:"mapVisible"}],staticStyle:{"background-color":"#fff"},attrs:{src:"",id:"iframe",frameborder:"0",allowTransparency:"true"}})])],1)])},h=[],v={render:g,staticRenderFns:h},A=v,b=n("VU/8"),C=o,x=b(u,A,!1,C,"data-v-24703db6",null);e.default=x.exports},hRxy:function(t,e,n){e=t.exports=n("FZ+f")(!0),e.push([t.i,"\n.top[data-v-24703db6] {\n  padding: 15px 0;\n}\n.top img[data-v-24703db6] {\n  width: 60px;\n  height: 60px;\n}\n.top p[data-v-24703db6] {\n  font-size: 12px;\n}\n#iframe[data-v-24703db6] {\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 1;\n}\n","",{version:3,sources:["E:/Sites/nbbp2.0.git/src/pages/BasicBusiness.vue"],names:[],mappings:";AACA;EACE,gBAAgB;CACjB;AACD;EACE,YAAY;EACZ,aAAa;CACd;AACD;EACE,gBAAgB;CACjB;AACD;EACE,gBAAgB;EAChB,OAAO;EACP,SAAS;EACT,UAAU;EACV,QAAQ;EACR,WAAW;CACZ",file:"BasicBusiness.vue",sourcesContent:["\n.top[data-v-24703db6] {\n  padding: 15px 0;\n}\n.top img[data-v-24703db6] {\n  width: 60px;\n  height: 60px;\n}\n.top p[data-v-24703db6] {\n  font-size: 12px;\n}\n#iframe[data-v-24703db6] {\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 1;\n}\n"],sourceRoot:""}])},"mN+V":function(t,e,n){var o=n("hRxy");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n("rjj0")("00de38ef",o,!0)}});
//# sourceMappingURL=21.c8922831fc6c435b276f.js.map